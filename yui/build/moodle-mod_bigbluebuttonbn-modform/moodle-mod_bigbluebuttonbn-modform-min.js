YUI.add("moodle-mod_bigbluebuttonbn-modform",function(e,t){M.mod_bigbluebuttonbn=M.mod_bigbluebuttonbn||{},M.mod_bigbluebuttonbn.modform={bigbluebuttonbn:{},init:function(e){this.bigbluebuttonbn=e,this.update_instance_type_profile()},update_instance_type_profile:function(){var t=e.one("#id_type");this.apply_instance_type_profile(this.bigbluebuttonbn.instance_type_profiles[t.get("value")])},apply_instance_type_profile:function(e){var t=e.features,n=t.includes("all");this.show_fieldset("id_room",n||t.includes("showroom")),this.show_fieldset("id_recordings",n||t.includes("showrecordings")),this.show_fieldset("id_preuploadpresentation",n||t.includes("preuploadpresentation")),this.show_fieldset("id_permissions",n||t.includes("permissions")),this.show_fieldset("id_schedule",n||t.includes("schedule"))},show_fieldset:function(t,n){var r=e.DOM.byId(t);if(!r)return;if(n){e.DOM.setStyle(r,"display","block");return}e.DOM.setStyle(r,"display","none")},participant_selection_set:function(){this.select_clear("bigbluebuttonbn_participant_selection");var e=document.getElementById("bigbluebuttonbn_participant_selection_type");for(var t=0;t<e.options.length;t++)if(e.options[t].selected){var n=this.bigbluebuttonbn.participant_selection[e.options[t].value];for(var r=0;r<n.length;r++)this.select_add_option("bigbluebuttonbn_participant_selection",n[r].name,n[r].id);r===0?(this.select_add_option("bigbluebuttonbn_participant_selection","---------------","all"),this.select_disable("bigbluebuttonbn_participant_selection")):this.select_enable("bigbluebuttonbn_participant_selection")}},participant_list_update:function(){var e=document.getElementsByName("participants")[0];e.value=JSON.stringify(this.bigbluebuttonbn.participant_list).replace(/"/g,"&quot;")},participant_remove:function(e,t){for(var n=0;n<this.bigbluebuttonbn.participant_list.length;n++)this.bigbluebuttonbn.participant_list[n].selectiontype==e&&this.bigbluebuttonbn.participant_list[n].selectionid==(t===""?null:t)&&this.bigbluebuttonbn.participant_list.splice(n,1);var r=document.getElementById("participant_list_table");for(var i=0;i<r.rows.length;i++)r.rows[i].id=="participant_list_tr_"+e+"-"+t&&r.deleteRow(n);this.participant_list_update()},participant_add:function(){var e=document.getElementById("bigbluebuttonbn_participant_selection_type"),t=document.getElementById("bigbluebuttonbn_participant_selection"),n=!1;for(var r=0;r<this.bigbluebuttonbn.participant_list.length;r++)this.bigbluebuttonbn.participant_list[r].selectiontype==e.value&&this.bigbluebuttonbn.participant_list[r].selectionid==t.value&&(n=!0);if(!n){var i={selectiontype:e.value,selectionid:t.value,role:"viewer"};this.bigbluebuttonbn.participant_list.push(i);var s=document.getElementById("participant_list_table"),o=s.insertRow(s.rows.length);o.id="participant_list_tr_"+e.value+"-"+t.value;var u=o.insertCell(0);u.width="125px",u.innerHTML="<b><i>"+e.options[e.selectedIndex].text,u.innerHTML+=(e.value!=="all"?":&nbsp;":"")+"</i></b>";var a=o.insertCell(1);a.innerHTML="",e.value!=="all"&&(a.innerHTML=t.options[t.selectedIndex].text);var f;f="&nbsp;<i>"+this.bigbluebuttonbn.strings.as+'</i>&nbsp;<select id="participant_list_role_',f+=e.value+"-"+t.value,f+='" onchange="this.participant_list_role_update(\'',f+=e.value+"', '"+t.value,f+='\'); return 0;" class="select custom-select"><option value="viewer" selected="selected">',f+=this.bigbluebuttonbn.strings.viewer+'</option><option value="moderator">',f+=this.bigbluebuttonbn.strings.moderator+"</option></select>";var l=o.insertCell(2);l.innerHTML=f;var c=o.insertCell(3);c.width="20px",f="<a onclick=\"this.participant_remove('",f+=e.value+"', '"+t.value,f+='\'); return 0;" title="'+this.bigbluebuttonbn.strings.remove+'">x</a>',this.bigbluebuttonbn.icons_enabled&&(f='<a class="action-icon" onclick="this.participant_remove(\'',f+=e.value+"', '",f+=t.value+'\'); return 0;"><img class="btn icon smallicon" alt="',f+=this.bigbluebuttonbn.strings.remove+'" title="'+this.bigbluebuttonbn.strings.remove+'" src="',f+=this.bigbluebuttonbn.pix_icon_delete+'"></img></a>'),c.innerHTML=f}this.participant_list_update()},participant_list_role_update:function(e,t){var n=document.getElementById("participant_list_role_"+e+"-"+t);for(var r=0;r<this.bigbluebuttonbn.participant_list.length;r++)this.bigbluebuttonbn.participant_list[r].selectiontype==e&&this.bigbluebuttonbn.participant_list[r].selectionid==(t===""?null:t)&&(this.bigbluebuttonbn.participant_list[r].role=n.value);this.participant_list_update()},select_clear:function(e){var t=document.getElementById(e);while(t.length>0)t.remove(t.length-1)},select_enable:function(e){var t=document.getElementById(e);t.disabled=!1},select_disable:function(e){var t=document.getElementById(e);t.disabled=!0},select_add_option:function(e,t,n){var r=document.getElementById(e),i=document.createElement("option");i.text=t,i.value=n,r.add(i,0)}}},"@VERSION@",{requires:["base","node"]});
