YUI.add("moodle-mod_bigbluebuttonbn-recordings",function(e,t){M.mod_bigbluebuttonbn=M.mod_bigbluebuttonbn||{},M.mod_bigbluebuttonbn.recordings={datasource:null,locale:"en",profilefeatures:{},datatable:{},init:function(t){this.datasource=new e.DataSource.Get({source:M.cfg.wwwroot+"/mod/bigbluebuttonbn/bbb_broker.php?"}),this.locale=t.locale,this.profilefeatures=t.profile_features,this.datatable.columns=t.columns,this.datatable.data=t.data,t.recordings_html===!1&&(this.profilefeatures.includes("all")||this.profilefeatures.includes("showrecordings"))&&this.datatable_init()},datatable_init:function(){var e={weekday:"long",year:"numeric",month:"long",day:"numeric"},t=this.datatable.columns,n=this.datatable.data;for(var r=0;r<n.length;r++){var i=new Date(n[r].date);n[r].date=i.toLocaleDateString(this.locale,e)}YUI({lang:this.locale}).use("datatable","datatable-sort","datatable-paginator","datatype-number",function(e){var r=(new e.DataTable({width:"1075px",columns:t,data:n,rowsPerPage:10,paginatorLocation:["header","footer"]})).render("#bigbluebuttonbn_yui_table");return r})},recording_action_inprocess:function(t){console.info("action "+t.action+" in process");var n=e.one("#recording-btn-"+t.action+"-"+t.recordingid),r=M.mod_bigbluebuttonbn.locales.strings.unpublishing;t.action=="publish"&&(r=M.mod_bigbluebuttonbn.locales.strings.publishing),n.setAttribute("alt",r),n.setAttribute("title",r),n.setAttribute("data-osrc",n.getAttribute("src")),n.setAttribute("src",M.cfg.wwwroot+"/mod/bigbluebuttonbn/pix/processing16.gif");var i=e.one("#recording-link-"+t.action+"-"+t.recordingid);i.setAttribute("data-oonlcick",i.getAttribute("onclick")),i.setAttribute("onclick","")},recording_action_completed:function(t){console.info("action "+t.action+" completed");var n=e.one("#recording-btn-"+t.action+"-"+t.recordingid),r=n.getAttribute("data-osrc"),i=e.one("#recording-link-"+t.action+"-"+t.recordingid),s=i.getAttribute("data-oonlcick"),o="publish",u="show",a=M.mod_bigbluebuttonbn.locales.strings.publish;e.one("#playbacks-"+t.recordingid).hide(),t.action==="publish"&&(o="unpublish",u="hide",a=M.mod_bigbluebuttonbn.locales.strings.unpublish,e.one("#playbacks-"+t.recordingid).show()),n.setAttribute("id","recording-btn-"+o+"-"+t.recordingid),i.setAttribute("id","recording-link-"+o+"-"+t.recordingid),n.setAttribute("src",r.substring(0,r.length-4)+u),n.setAttribute("alt",a),n.setAttribute("title",a),i.setAttribute("onclick",s.replace(t.action,o))},recording_action_failed:function(t){console.info("action "+t.action+" failed");var n=e.one("#recording-btn-"+t.action+"-"+t.recordingid),r=e.one("#recording-link-"+t.action+"-"+t.recordingid),i=M.mod_bigbluebuttonbn.locales.strings.unpublish;t.action==="publish"&&(i=M.mod_bigbluebuttonbn.locales.strings.publish),n.setAttribute("id","recording-btn-"+t.action+"-"+t.recordingid),r.setAttribute("id","recording-link-"+t.action+"-"+t.recordingid),n.setAttribute("src",n.getAttribute("data-osrc")),n.setAttribute("alt",i),n.setAttribute("title",i),r.setAttribute("onclick",r.getAttribute("data-oonlcick"))}}},"@VERSION@",{requires:["base","node","datasource-get","datasource-jsonschema","datasource-polling","moodle-core-notification"]});
